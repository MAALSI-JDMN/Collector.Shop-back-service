doctype html
html(lang="fr")
    head
        meta(charset="UTF-8")
        title Envoi Kafka
        style.
            body { font-family: Arial; background:#f3f4f6; }
            .card {
                width:320px; margin:100px auto; padding:20px;
                background:white; border-radius:10px;
                box-shadow:0 4px 10px rgba(0,0,0,.1);
            }
            input, button {
                width:100%; margin-bottom:10px; padding:8px;
            }
    body
        .card
            h2 Informations utilisateur
            input(type="text" id="nom" placeholder="Nom")
            input(type="text" id="prenom" placeholder="Prénom")
            input(type="email" id="email" placeholder="Email")
            input(type="number" id="age" placeholder="Âge")
            button(onclick="sendKafka()") Valider

        script.
            async function sendKafka() {
                const payload = {
                    nom: document.getElementById("nom").value,
                    prenom: document.getElementById("prenom").value,
                    email: document.getElementById("email").value,
                    age: Number(document.getElementById("age").value)
                };

                const res = await fetch("/kafka/publish", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                alert(data.status || "Erreur d'envoi");
            }
